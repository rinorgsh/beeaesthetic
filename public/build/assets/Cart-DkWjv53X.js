import{r as h,s as C,c as l,b as n,f,d as s,u as a,h as P,g as T,P as U,F as B,e as S,i as b,t as r,w as F,j as u,v as p,k as R,m as L}from"./app-DoGikrb7.js";import{a as A,T as D,F as j}from"./Footer-Dk8ANoo3.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const M={class:"cart-section"},z={class:"container"},O={key:0,class:"empty-cart"},X={key:1,class:"cart-grid"},$={class:"cart-items"},H={class:"item-image"},J=["src","alt"],K={key:1,class:"no-image"},Q={class:"item-details"},W={class:"item-name"},G={class:"item-price"},Y={class:"item-quantity"},Z=["onClick"],ee={class:"qty-value"},se=["onClick"],te={class:"item-total"},oe={class:"total-price"},le=["onClick"],ne={class:"cart-summary-wrapper"},ie={class:"cart-summary"},ae={class:"summary-line"},re={class:"summary-line"},ue={key:0,class:"summary-line"},pe={class:"summary-total"},de={class:"form-group"},me={class:"form-group"},ve={key:0,class:"shipping-section"},ce={class:"form-group"},_e={class:"form-group"},ge={class:"form-row"},ye={class:"form-group"},he={class:"form-group"},fe={class:"form-group"},be={class:"form-group"},ke={class:"form-group"},qe=["disabled"],Ce={key:0},Ve={key:1},xe={key:1,class:"error-message"},we={__name:"Cart",setup(Ne){const{cartItems:c,cartTotal:k,cartCount:V,updateQuantity:q,removeFromCart:x,clearCart:w}=A(),o=h({customer_name:"",customer_email:"",shipping_name:"",shipping_address:"",shipping_postal_code:"",shipping_city:"",shipping_country:"BE",shipping_phone:"",shipping_notes:""}),d=h(!1),m=h(null),_=C(()=>c.value.some(i=>i.type==="physical")),y=C(()=>_.value?o.value.shipping_country==="BE"?5:10:0),v=i=>new Intl.NumberFormat("fr-BE",{style:"currency",currency:"EUR"}).format(i),N=()=>{const i=document.querySelector('meta[name="csrf-token"]');return i?i.getAttribute("content"):null},E=async()=>{d.value=!0,m.value=null;const i=N();if(!i){m.value="Erreur de sÃ©curitÃ©. Veuillez rafraÃ®chir la page.",d.value=!1;return}try{const e=await fetch("/checkout/cart",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":i,"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({items:c.value,customer_name:o.value.customer_name,customer_email:o.value.customer_email,..._.value&&{shipping_name:o.value.shipping_name,shipping_address:o.value.shipping_address,shipping_postal_code:o.value.shipping_postal_code,shipping_city:o.value.shipping_city,shipping_country:o.value.shipping_country,shipping_phone:o.value.shipping_phone,shipping_notes:o.value.shipping_notes,shipping_cost:y.value}})});if(!e.ok){const g=await e.json();throw new Error(g.message||"Erreur lors de la crÃ©ation de la session de paiement")}const t=await e.json();if(t.url)w(),window.location.href=t.url;else throw new Error("URL de paiement non reÃ§ue")}catch(e){console.error("Erreur:",e),m.value=e.message||"Une erreur est survenue. Veuillez rÃ©essayer.",d.value=!1}};return(i,e)=>(n(),l("div",null,[f(D),e[32]||(e[32]=s("section",{class:"cart-hero"},[s("div",{class:"container"},[s("h1",{class:"hero-title"},"Votre Panier"),s("div",{class:"hero-divider"})])],-1)),s("section",M,[s("div",z,[a(c).length===0?(n(),l("div",O,[e[10]||(e[10]=s("div",{class:"empty-icon"},"ğŸ›ï¸",-1)),e[11]||(e[11]=s("p",{class:"empty-text"},"Votre panier est vide",-1)),e[12]||(e[12]=s("p",{class:"empty-subtext"},"DÃ©couvrez nos produits exclusifs",-1)),f(a(U),{href:"/shop",class:"btn-shop"},{default:P(()=>e[9]||(e[9]=[T(" DÃ©couvrir la boutique ")])),_:1})])):(n(),l("div",X,[s("div",$,[(n(!0),l(B,null,S(a(c),t=>(n(),l("div",{key:t.id,class:"cart-item"},[s("div",H,[t.image_url?(n(),l("img",{key:0,src:t.image_url,alt:t.name},null,8,J)):(n(),l("div",K,"ğŸ“¦"))]),s("div",Q,[s("h3",W,r(t.name),1),s("p",G,r(v(t.price)),1)]),s("div",Y,[s("button",{onClick:g=>a(q)(t.id,t.quantity-1),class:"qty-btn"}," âˆ’ ",8,Z),s("span",ee,r(t.quantity),1),s("button",{onClick:g=>a(q)(t.id,t.quantity+1),class:"qty-btn"}," + ",8,se)]),s("div",te,[s("p",oe,r(v(t.price*t.quantity)),1)]),s("button",{onClick:g=>a(x)(t.id),class:"item-remove",title:"Retirer"}," Ã— ",8,le)]))),128))]),s("div",ne,[s("div",ie,[e[30]||(e[30]=s("h2",{class:"summary-title"},"RÃ©sumÃ©",-1)),s("div",ae,[e[13]||(e[13]=s("span",null,"Sous-total",-1)),s("span",null,r(v(a(k))),1)]),s("div",re,[e[14]||(e[14]=s("span",null,"Articles",-1)),s("span",null,r(a(V)),1)]),_.value?(n(),l("div",ue,[e[15]||(e[15]=s("span",null,"Livraison",-1)),s("span",null,r(v(y.value)),1)])):b("",!0),e[31]||(e[31]=s("div",{class:"summary-divider"},null,-1)),s("div",pe,[e[16]||(e[16]=s("span",null,"Total",-1)),s("span",null,r(v(a(k)+y.value)),1)]),s("form",{onSubmit:F(E,["prevent"]),class:"checkout-form"},[e[28]||(e[28]=s("h3",{class:"form-section-title"},"Informations",-1)),s("div",de,[e[17]||(e[17]=s("label",null,"Nom complet",-1)),u(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.customer_name=t),type:"text",required:"",placeholder:"PrÃ©nom Nom"},null,512),[[p,o.value.customer_name]])]),s("div",me,[e[18]||(e[18]=s("label",null,"Email",-1)),u(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.customer_email=t),type:"email",required:"",placeholder:"votre@email.com"},null,512),[[p,o.value.customer_email]])]),_.value?(n(),l("div",ve,[e[27]||(e[27]=s("h3",{class:"form-section-title"},"Adresse de livraison",-1)),s("div",ce,[e[19]||(e[19]=s("label",null,"Nom du destinataire",-1)),u(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.shipping_name=t),type:"text",required:"",placeholder:"PrÃ©nom Nom"},null,512),[[p,o.value.shipping_name]])]),s("div",_e,[e[20]||(e[20]=s("label",null,"Adresse",-1)),u(s("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.shipping_address=t),type:"text",required:"",placeholder:"Rue et numÃ©ro"},null,512),[[p,o.value.shipping_address]])]),s("div",ge,[s("div",ye,[e[21]||(e[21]=s("label",null,"Code postal",-1)),u(s("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.shipping_postal_code=t),type:"text",required:"",placeholder:"1000"},null,512),[[p,o.value.shipping_postal_code]])]),s("div",he,[e[22]||(e[22]=s("label",null,"Ville",-1)),u(s("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>o.value.shipping_city=t),type:"text",required:"",placeholder:"Bruxelles"},null,512),[[p,o.value.shipping_city]])])]),s("div",fe,[e[24]||(e[24]=s("label",null,"Pays",-1)),u(s("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.value.shipping_country=t),required:""},e[23]||(e[23]=[L('<option value="BE" data-v-6b3952e4>ğŸ‡§ğŸ‡ª Belgique</option><option value="FR" data-v-6b3952e4>ğŸ‡«ğŸ‡· France</option><option value="NL" data-v-6b3952e4>ğŸ‡³ğŸ‡± Pays-Bas</option><option value="LU" data-v-6b3952e4>ğŸ‡±ğŸ‡º Luxembourg</option><option value="DE" data-v-6b3952e4>ğŸ‡©ğŸ‡ª Allemagne</option>',5)]),512),[[R,o.value.shipping_country]])]),s("div",be,[e[25]||(e[25]=s("label",null,"TÃ©lÃ©phone",-1)),u(s("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>o.value.shipping_phone=t),type:"tel",required:"",placeholder:"+32 123 45 67 89"},null,512),[[p,o.value.shipping_phone]])]),s("div",ke,[e[26]||(e[26]=s("label",null,"Notes (optionnel)",-1)),u(s("textarea",{"onUpdate:modelValue":e[8]||(e[8]=t=>o.value.shipping_notes=t),rows:"2",placeholder:"Instructions spÃ©ciales..."},null,512),[[p,o.value.shipping_notes]])])])):b("",!0),s("button",{type:"submit",disabled:d.value,class:"btn-checkout"},[d.value?(n(),l("span",Ce,"Traitement en cours...")):(n(),l("span",Ve,"ProcÃ©der au paiement"))],8,qe),e[29]||(e[29]=s("p",{class:"secure-text"},"ğŸ”’ Paiement sÃ©curisÃ© par Stripe",-1))],32),m.value?(n(),l("div",xe,r(m.value),1)):b("",!0)])])]))])]),f(j)]))}},Be=I(we,[["__scopeId","data-v-6b3952e4"]]);export{Be as default};
